### kafka
* 观察者模式 -- 发布订阅模式
* 生产者消费者模式
* Topic  主题 （相当于数据库中的表）
* partition 分区一个分区就是一个提交日志
* segment 段 partition细分为若干个segment,每个segment文件的大小相同
* broker 每个 Kafka 中服务器被称为 broker。broker 接收来自生产者的消息，为消息设置偏移量，并提交消息到磁盘保存。broker 为消费者提供服务，对读取分区的请求作出响应，返回已经提交到磁盘上的消息
* 优点
    * 高吞吐量  性能好  集群高可用
* 缺点
    * 会丢失数据 功能比较单一
* 使用场景
    * 日志分析  大数据采集
~~~python
"""
概念间的联系
一个主题包含无数个分区,因此无法保证在整个topic中有序
"""
~~~

* 消息队列如何保证消息的高效读写
    * 零拷贝技术
        * 省去用户空间的拷贝次数（俩次）直接在内核空间完成拷贝mmap
        * DMA优化 文件传输直接使用DMA transfile
    * kafka index日志文件使用mmap方式读写
* 消息队列如何保证消息顺序
    * MQ只需要保证局部有序 不需要保证全局有序
    * 生产者将一组有序的消息放到一个队列中， 消费者一次消费整个队列中的消息
    * kafka 生产者通过定制partition分配规则， 将消息分配到同一个partition Topic下只对应一个消费者
* rabbitMQ
    * 优点： 消息可靠性高 功能全面
    * 缺点： 吞吐量低 消息积累影响性能 erlang语言不好定制
    * 使用场景： 小规模场景
* RocketMQ:
    * 优点： 高吞吐 高性能 高可用 功能全面
    * 缺点： 不够成熟 